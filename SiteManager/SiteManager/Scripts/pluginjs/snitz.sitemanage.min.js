function newfolder(){if($("#targetfolder").val()===""){BootstrapDialog.alert({title:Snitzres.NoFolderErr,message:Snitzres.NoFolderMsg});$("#targetfolder").focus();return}$("#filemanager-form").attr("action",SnitzVars.baseUrl+"WebFileManager/newfolder");$("#filemanager-form").submit()}function upload(){if($("#fileupload").val()===""){BootstrapDialog.alert({title:Snitzres.UploadErr,message:Snitzres.UploadNoFileMsg});$("#fileupload").focus();return}$("#filemanager-form").attr("action",SnitzVars.baseUrl+"WebFileManager/upload");$("#filemanager-form").attr("enctype","multipart/form-data");$("#filemanager-form").submit()}function confirmfiles(n){var i=0,t="",u=$("#filemanager-form").find(":checkbox"),r;if(u.each(function(){if(this.checked)if(n==="rename"){var t="",r="";t=this.name;t=t.replace("checked_","");r=prompt(window.Snitzres.NewFilename+t,t);r!=null?(this.name=this.name+window.Snitzres.Rename+r,i=i+1):$(this).prop("checked",!1)}else i=i+1}),i===0){BootstrapDialog.newalert(window.Snitzres.fileSelectErr,window.Snitzres.fileSelectMsg);return}if(t=window.Snitzres.ConfirmMsg,r=window.Snitzres.ConfirmTarget,t=t.replace("[sAction]",n).replace("nMarked",i),(n==="copy"||n==="move")&&(r=r.replace("[folder]",$("#targetfolder").val()),t=t+r,$("#targetfolder").val()==="")){$("#targetfolder").focus();BootstrapDialog.alert({title:window.Snitzres.fileCopyErr,message:window.Snitzres.fileCopyMsg});return}t=t+"?";n==="copy"||n==="rename"?($("#filemanager-form").attr("action",window.SnitzVars.baseUrl+"WebFileManager/"+n),$("#filemanager-form").submit()):BootstrapDialog.confirm({title:window.Snitzres.Confirm,message:t,callback:function(t){if(t){$("#filemanager-form").attr("action",window.SnitzVars.baseUrl+"WebFileManager/"+n);$("#filemanager-form").submit();return}}})}function linkSuccess(n){var t,i;return console.log("href: "+$(this)[0].href),t=$(this)[0].href.replace("X-Requested-With=XMLHttpRequest","col=").replace("/Table/","/EditTable/"),console.log("targetUrl: "+t),i=ConvertJsonToTable($.parseJSON(n.Result),null,"table table-bordered table-striped table-condensed",t),$("#result").html(i),$("#resultLabel").html(n.ID+" Properties"),$("#resultLabel").removeClass("danger"),$("#result-panel").show(),$("#table-buttons").show(),$("#btn-new-col").attr("href",t+"?col=NEW"),$("#query-panel").hide(),$("#create-panel").hide(),$("#backup-panel").hide(),!1}function linkFailure(n){$("#result").html("");$("#resultLabel").html(n);$("#resultLabel").addClass("danger");$("#result-panel").show();$("#table-buttons").hide()}$(document).ready(function(){$(document).on("change",":file",function(){var n=$(this),t=n.get(0).files?n.get(0).files.length:1,i=n.val().replace(/\\/g,"/").replace(/.*\//,"");n.trigger("fileselect",[t,i])});$(":file").on("fileselect",function(n,t,i){var u=$(this).parents(".input-group").find(":text"),r=t>1?t+" files selected":i;u.length?u.val(r):r&&alert(r)});$("#btn-sql").on("click",function(){$("#backup-panel").hide();$("#create-panel").hide();$("#table-buttons").hide();$("#result-panel").hide();$("#query-panel").show()});$("#btn-backup").on("click",function(){$("#query-panel").hide();$("#create-panel").hide();$("#table-buttons").hide();$("#result-panel").hide();$("#backup-panel").show()});$("#btn-create-table").on("click",function(){$("#query-panel").hide();$("#table-buttons").hide();$("#backup-panel").hide();$("#result-panel").hide();$("#create-panel").show()});$("body").on("change","#checkAll",function(){var n=$(this).closest("form").find(":checkbox");$(this).is(":checked")?n.prop("checked",!0):n.prop("checked",!1)});$("#runQuery").click(function(n){n.preventDefault();$("#table-buttons").hide();var t=$(this).parents("form");$.ajax({type:"POST",url:t.attr("action"),data:t.serialize(),dataType:"json",error:function(n,t,i){$("#result").html("");$("#resultLabel").html(i+": "+n.responseText);$("#resultLabel").addClass("danger");$("#result-panel").show()},success:function(n){var t=ConvertJsonToTable(n,null,"table table-bordered table-striped table-condensed",null);return $("#result").html(t),$("#resultLabel").html("Query Returned - "+n.length+" record(s)"),$("#resultLabel").removeClass("danger"),$("#result-panel").show(),!1}})});$("body").on("click","a.del-col",function(n){n.preventDefault();var t=$(this).attr("href");$.get(t,function(n){var i=ConvertJsonToTable($.parseJSON(n.Result),null,"table table-bordered table-striped table-condensed",t.replace(/delcolumn/gi,"EditTable").replace(/col=.*/gi,"col="));$("#result").html(i);$("#resultLabel").html(n.ID+" Properties");$("#resultLabel").removeClass("danger");$("#result-panel").show()})});$("body").on("click","a.row-edit",function(n){return n.preventDefault(),$.get($(this).attr("href"),function(n){$("#myModalLabel").text("Edit Column");$("#editModal").modal("show");$("#editContainer").html(n);$.validator.unobtrusive.parse($("#editRowForm"))}),!1});$("body").on("click","a.row-add",function(n){return n.preventDefault(),$.get($(this).attr("href"),function(n){$("#myModalLabel").text("Add Column");$("#editModal").modal("show");$("#editContainer").html(n);$.validator.unobtrusive.parse($("#editRowForm"))}),!1})});